---
import { Picture } from "astro:assets";
import image from "../assets/images/Krzysztof-Iwanowski.jpg";
import image3 from "../assets/images/Krzysztof-Iwanowski-1.webp";
import image4 from "../assets/images/Krzysztof-Iwanowski-2.jpg";
import image5 from "../assets/images/Krzysztof-Iwanowski-3.jpg";
import Layout from "../layouts/Layout.astro";
import "../styles/trener.css";
---

<Layout
  title="Sportuś - Pasja, Doświadczenie i Inspiracja dla Twojego Dziecka"
  description="Poznaj naszego doświadczonego trenera, który z pasją prowadzi zajęcia sportowe dla dzieci. Dowiedz się więcej o jego kwalifikacjach, doświadczeniu i podejściu do treningu. Dołącz do nas i rozwijaj talent swojego dziecka!"
>
  <section id="sbs-1125">
    <div class="cs-container">
      <div>
        <!-- Left Image Section -->
        <div class="cs-image-group">
          <!--Main Image-->
          <Picture
            fallbackFormat="jpg"
            class="cs-picture"
            width="1500"
            height="1000"
            src={image}
            formats={["avif", "webp"]}
            alt="Piłkarz w zielonym stroju z numerem 4 (Krzysztof Iwanowsk), wykonujący wysoki kopnięcie podczas meczu na trawiastym boisku. Piłka jest w powietrzu, a w tle widoczny jest rozmazany przeciwnik w niebieskim stroju. Trybuny są w większości puste, z kilkoma kibicami obserwującymi mecz."
          />
        </div>

        <div class="cs-bottom-group">
          <button
            aria-label="kliknij aby powiększyć"
            title="kliknij aby powiększyć"
            class="cs-image-btn"
          >
            <Picture
              fallbackFormat="jpg"
              class="cs-bottom-small"
              formats={["avif", "webp"]}
              src={image5}
              width="1080"
              height="720"
              alt="Piłkarz w czerwono-białym pasiastym stroju (Krzysztof Iwanowsk) próbujący wykonać kopnięcie podczas meczu. Zbliża się zawodnik przeciwnika w zielonym stroju. Akcja rozgrywa się na trawiastym boisku, z bramką i rozmytymi kibicami w tle."
            />
          </button>
          <button
            aria-label="kliknij aby powiększyć"
            title="kliknij aby powiekszyc"
            class="cs-image-btn"
          >
            <Picture
              fallbackFormat="jpg"
              class="cs-bottom-small"
              formats={["avif", "webp"]}
              src={image4}
              width="1079"
              height="720"
              alt="Grupa piłkarzy i sędziów stojących na boisku przed rozpoczęciem meczu. Dwóch zawodników, jeden w żółtym (Krzysztof Iwanowsk), drugi w czerwono-białych pasach, stoi obok trzech sędziów w żółtych koszulkach. W tle widać drzewa i jasną, plenerową atmosferę."
            />
          </button>
          <button
            aria-label="kliknij aby powiększyć"
            title="kliknij aby powiekszyc"
            class="cs-image-btn"
          >
            <Picture
              fallbackFormat="jpg"
              class="cs-bottom-small last"
              formats={["avif", "webp"]}
              src={image3}
              width="1024"
              height="623"
              alt="Piłkarz w żółtym stroju (Krzysztof Iwanowsk) prowadzący piłkę podczas meczu, z naciskiem na jego ruch. W tle widać boisko i kilku kibiców, a słoneczna pogoda dodaje jasności do sceny."
            />
          </button>
        </div>
      </div>
      <!-- Right Content Section-->
      <div class="cs-content">
        <span class="cs-topper">PASJA I DOŚWIADCZENIE</span>
        <h1 class="cs-title">Od piłkarskich boisk Lechii Gdańsk do pracy z dzieci</h1>
        <p class="cs-text">
          Misją Sportusia jest wprowadzenie dzieci w świat sportu i aktywności fizycznej
          poprzez zabawę, kształtowanie zdrowych nawyków oraz rozwój charakteru. Zajęcia
          są skierowane do dzieci w wieku od 4 do 10 lat, a ich głównym celem jest
          pokazanie, że sport może być dostępny i przyjemny dla każdego, niezależnie od
          predyspozycji czy ograniczeń.
        </p>
        <p class="cs-text">
          W Sportusiu dbamy o wszechstronny rozwój dzieci, wplatając elementy różnych
          dyscyplin sportowych w kreatywne gry i zabawy ruchowe. Dzięki temu nasi mali
          podopieczni mogą nie tylko poprawiać kondycję fizyczną, ale także rozwijać cechy
          takie jak wytrwałość, współpraca i samodyscyplina. Wierzymy, że regularna
          aktywność fizyczna wspiera zdrowy rozwój dzieci, dlatego nasi trenerzy, z pasją
          i doświadczeniem, angażują dzieci do aktywności i pokazują, że sport to przede
          wszystkim zabawa i radość z ruchu.
        </p>
        <p class="cs-text">
          Sportuś to projekt stworzony przez Krzysztofa Iwanowskiego, absolwenta Akademii
          Wychowania Fizycznego i Sportu w Gdańsku, licencjonowanego trenera piłki nożnej
          oraz zawodowego piłkarza, który swoje sportowe doświadczenie zdobywał, grając
          m.in. w takich klubach jak Lechia Gdańsk, Olimpia Elbląg czy Bałtyk Gdynia. Jako
          tata 5-letniej Mai i półrocznej Mariki doskonale rozumie, jak ważne jest
          zaszczepienie dzieciom pasji do ruchu już od najmłodszych lat oraz jak głęboko
          aktywność fizyczna wpływa na ich rozwój i dobre samopoczucie.
        </p>
      </div>
    </div>

    <dialog aria-hidden="true" class="cs-dialog">
      <div class="cs-dialog-content">
        <button class="cs-dialog-close">Zamknij</button>
        <img class="cs-dialog-img" src="" alt="" />
      </div>
      <button class="left">Poprzedni</button>
      <button class="right">Następny</button>
    </dialog>
  </section>
  <!-- <History /> -->
</Layout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const imagesContainer = document.querySelector(".cs-bottom-group") as HTMLElement;
    const images = Array.from(
      imagesContainer.querySelectorAll(".cs-bottom-small")
    ) as HTMLImageElement[];

    imagesContainer.addEventListener("click", (event: MouseEvent) => {
      (event.target as HTMLElement).classList.add("active");

      const dialog = document.querySelector(".cs-dialog") as HTMLDialogElement;
      dialog.setAttribute("aria-hidden", "false");
      const dialogImg = dialog.querySelector("img") as HTMLImageElement;
      const csDialogClose = document.querySelector(
        ".cs-dialog-close"
      ) as HTMLButtonElement;

      if ((event.target as HTMLElement)?.classList.contains("active")) {
        dialogImg.src = (event.target as HTMLImageElement).src;
        dialog.showModal();
        csDialogClose.focus();

        csDialogClose.addEventListener("click", () => {
          dialog.close();
          (event.target as HTMLElement)?.classList.remove("active");
        });

        let currentImage = images.indexOf(event.target as HTMLImageElement);
        const nextButton = dialog.querySelector(".right") as HTMLButtonElement;
        const prevButton = dialog.querySelector(".left") as HTMLButtonElement;

        document.addEventListener("keydown", (e) => {
          if (e.key === "ArrowRight") {
            currentImage++;
            dialogImg.src = images[currentImage].src;
            updateButtonStates(currentImage, images, nextButton, prevButton);
          } else if (e.key === "ArrowLeft") {
            currentImage--;
            dialogImg.src = images[currentImage].src;
            updateButtonStates(currentImage, images, nextButton, prevButton);
          }
        });

        updateButtonStates(currentImage, images, nextButton, prevButton);

        nextButton.addEventListener("click", () => {
          currentImage++;
          dialogImg.src = images[currentImage].src;
          updateButtonStates(currentImage, images, nextButton, prevButton);
        });

        prevButton.addEventListener("click", () => {
          currentImage--;
          dialogImg.src = images[currentImage].src;
          updateButtonStates(currentImage, images, nextButton, prevButton);
        });
      }

      document.addEventListener("click", (e) => {
        if (e.target === dialog) {
          dialog.close();
          (event.target as HTMLElement)?.classList.remove("active");
        }
      });
    });
  });

  function updateButtonStates(
    currentImage: number,
    images: HTMLImageElement[],
    nextButton: HTMLButtonElement,
    prevButton: HTMLButtonElement
  ) {
    const hasNext = currentImage < images.length - 1;
    const hasPrev = currentImage > 0;

    nextButton.disabled = !hasNext;
    prevButton.disabled = !hasPrev;
  }
</script>
